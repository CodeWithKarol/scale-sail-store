<article
  class="group relative flex flex-col overflow-hidden rounded-2xl bg-white ring-1 ring-slate-900/5 shadow-sm transition-all duration-300 hover:shadow-xl hover:ring-slate-900/10 hover:-translate-y-1 h-full"
>
  <!-- Image Area -->
  <div class="aspect-[16/10] sm:aspect-[3/2] bg-slate-50 relative overflow-hidden">
    <img
      [src]="productImage()"
      [alt]="product().name"
      class="absolute inset-0 h-full w-full object-cover transition duration-700 group-hover:scale-105"
      loading="lazy"
    />
    <!-- Badges -->
    <div class="absolute top-4 inset-x-4 flex justify-between items-start pointer-events-none">
      <span
        class="inline-flex items-center rounded-full bg-white/95 backdrop-blur-md px-2.5 py-1 text-xs font-semibold shadow-sm ring-1 ring-slate-900/5"
        [ngClass]="{
          'text-green-700': product().price.amountMinor === 0,
          'text-slate-700': product().price.amountMinor > 0,
        }"
      >
        {{ product().price.amountMinor === 0 ? 'Free' : 'Premium' }}
      </span>
    </div>
  </div>

  <!-- Content -->
  <div class="flex flex-1 flex-col p-6">
    <!-- Header -->
    <div class="flex items-start justify-between gap-4">
      <div>
        <h3 class="text-lg font-bold text-slate-900 leading-snug">
          <a
            [href]="product().buyUrl"
            target="_blank"
            class="focus:outline-none"
            [attr.aria-label]="'View details for ' + product().name + ' (opens in new tab)'"
          >
            <span class="absolute inset-0" aria-hidden="true"></span>
            {{ product().name }}
          </a>
        </h3>
        <p class="mt-1 text-xs font-medium text-slate-500">
          {{ product().bestFor.slice(0, 3).join(', ') }}
        </p>
      </div>
      <p class="text-lg font-bold text-slate-900 shrink-0">
        {{
          product().price.label ??
            (product().price.amountMinor / 100
              | currency: product().price.currency : 'symbol' : '1.2-2')
        }}
      </p>
    </div>

    <p class="mt-4 text-sm leading-relaxed text-slate-600 line-clamp-2">
      {{ product().description }}
    </p>

    <!-- Features -->
    <div class="mt-5 space-y-2 border-t border-slate-100 pt-5">
      @for (chip of product().chips.slice(0, 3); track chip) {
        <div class="flex items-center gap-2 text-xs font-medium text-slate-500">
          <svg
            class="h-1.5 w-1.5 fill-indigo-500 flex-shrink-0"
            viewBox="0 0 6 6"
            aria-hidden="true"
          >
            <circle cx="3" cy="3" r="3" />
          </svg>
          {{ chip }}
        </div>
      }
    </div>

    <!-- Spacer -->
    <div class="flex-1"></div>

    <!-- CTA -->
    <div class="mt-6 pt-2">
      <div
        class="flex w-full items-center justify-center rounded-lg bg-slate-900 px-4 py-2.5 text-sm font-semibold text-white shadow-sm ring-1 ring-slate-900 transition-colors group-hover:bg-indigo-600 group-hover:ring-indigo-600"
      >
        {{ product().price.amountMinor === 0 ? 'Download now' : 'Buy template' }}
      </div>
    </div>
  </div>
</article>
