<section class="relative isolate bg-slate-950 font-sans">
  <div class="mx-auto grid max-w-7xl grid-cols-1 lg:grid-cols-2">
    <!-- Left Column: Content & Image -->
    <div class="relative px-6 pb-20 pt-24 sm:pt-32 lg:static lg:px-8 lg:py-48">
      <div class="absolute inset-0 -z-10 overflow-hidden lg:right-1/2">
        <!-- Abstract Background Image -->
        <img
          src="https://images.unsplash.com/photo-1556761175-5973dc0f32e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1632&q=80"
          alt=""
          class="h-full w-full object-cover object-center opacity-10 blur-sm saturate-0 transition-opacity duration-500 hover:opacity-20"
        />
        <div
          class="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/80 to-slate-950/40"
        ></div>
        <!-- Decorative Gradient -->
        <div
          class="absolute -top-24 right-0 -z-10 transform-gpu blur-3xl sm:top-0 lg:-right-32 lg:top-8"
          aria-hidden="true"
        >
          <div
            class="aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#4f46e5] to-[#818cf8] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]"
            style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"
          ></div>
        </div>
      </div>

      <div class="mx-auto max-w-xl lg:mx-0 lg:max-w-lg">
        <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Need help?</h2>
        <p class="mt-6 text-lg leading-8 text-slate-300">
          If something doesnâ€™t work as expected, use the support form and include the template name
          plus a short description of the issue.
        </p>

        <div class="mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2">
          <div
            class="rounded-2xl bg-white/5 p-6 ring-1 ring-white/10 backdrop-blur-lg transition-all hover:bg-white/10"
          >
            <div
              class="flex h-10 w-10 items-center justify-center rounded-lg bg-indigo-500/20 ring-1 ring-indigo-500/30"
            >
              <lucide-angular [img]="Loader2" class="h-6 w-6 text-indigo-400"></lucide-angular>
            </div>
            <h3 class="mt-4 text-sm font-semibold text-white">Response time</h3>
            <p class="mt-2 text-sm leading-6 text-slate-400">Within 24 hours</p>
          </div>
          <div
            class="rounded-2xl bg-white/5 p-6 ring-1 ring-white/10 backdrop-blur-lg transition-all hover:bg-white/10"
          >
            <div
              class="flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-500/20 ring-1 ring-emerald-500/30"
            >
              <lucide-angular [img]="Check" class="h-6 w-6 text-emerald-400"></lucide-angular>
            </div>
            <h3 class="mt-4 text-sm font-semibold text-white">Direct support</h3>
            <p class="mt-2 text-sm leading-6 text-slate-400">Fixed by developer</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: Form -->
    <div class="px-6 pb-24 pt-20 sm:pb-32 lg:px-8 lg:py-48">
      <div class="mx-auto max-w-xl lg:mr-0 lg:max-w-lg">
        @if (isSuccess()) {
        <div class="flex h-full flex-col items-center justify-center py-12 text-center">
          <div
            class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-emerald-500/10 ring-1 ring-emerald-500/20"
          >
            <lucide-angular [img]="Check" class="h-8 w-8 text-emerald-500"></lucide-angular>
          </div>
          <h3 class="mt-6 text-2xl font-bold tracking-tight text-white">Message sent!</h3>
          <p class="mt-2 text-base text-slate-400">
            We'll get back to you ensuring your issue is resolved.
          </p>
          <div class="mt-10">
            <button
              (click)="isSuccess.set(false)"
              class="rounded-full bg-white/10 px-6 py-2.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white/10 hover:bg-white/20"
            >
              Send another message
            </button>
          </div>
        </div>
        } @else {
        <form [formGroup]="form" (ngSubmit)="submitForm()" class="space-y-6">
          @if (errorMessage()) {
          <div class="rounded-xl bg-red-900/20 p-4 ring-1 ring-inset ring-red-500/20 mb-8">
            <div class="flex">
              <div class="ml-3">
                <h3 class="text-sm font-medium text-red-300">Error</h3>
                <div class="mt-1 text-sm text-red-400/90">
                  <p>{{ errorMessage() }}</p>
                </div>
              </div>
            </div>
          </div>
          }

          <div class="relative">
            <label for="name" class="block text-sm font-medium leading-6 text-white"
              >Name <span class="text-indigo-400">*</span></label
            >
            <div class="relative mt-2">
              <input
                type="text"
                id="name"
                formControlName="name"
                class="block w-full rounded-xl border-0 bg-white/5 py-3.5 px-4 text-white shadow-sm ring-1 ring-inset transition-all selection:bg-indigo-500 selection:text-white focus:bg-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                [class.ring-red-500]="form.controls['name'].invalid && form.controls['name'].touched"
                [class.ring-white/10]="!form.controls['name'].touched || form.controls['name'].valid"
                placeholder="John Doe"
              />
            </div>
            @if (form.controls['name'].invalid && form.controls['name'].touched) {
            <p class="absolute -bottom-5 left-0 text-xs font-medium text-red-400">
              Name is required
            </p>
            }
          </div>

          <div class="relative">
            <label for="email" class="block text-sm font-medium leading-6 text-white"
              >Email address <span class="text-indigo-400">*</span></label
            >
            <div class="relative mt-2">
              <input
                type="email"
                id="email"
                formControlName="email"
                class="block w-full rounded-xl border-0 bg-white/5 py-3.5 px-4 text-white shadow-sm ring-1 ring-inset transition-all selection:bg-indigo-500 selection:text-white focus:bg-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                [class.ring-red-500]="form.controls['email'].invalid && form.controls['email'].touched"
                [class.ring-white/10]="!form.controls['email'].touched || form.controls['email'].valid"
                placeholder="you@example.com"
              />
            </div>
            @if (form.controls['email'].invalid && form.controls['email'].touched) {
            <p class="absolute -bottom-5 left-0 text-xs font-medium text-red-400">
              @if (form.controls['email'].hasError('required')) { Email is required } @else { Please
              enter a valid email }
            </p>
            }
          </div>

          <div>
            <label for="product" class="block text-sm font-medium leading-6 text-white"
              >Product</label
            >
            <div class="relative mt-2">
              <select
                id="product"
                formControlName="product"
                class="block w-full appearance-none rounded-xl border-0 bg-white/5 py-3.5 pl-4 pr-10 text-white shadow-sm ring-1 ring-inset ring-white/10 transition-all focus:bg-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&>option]:bg-slate-900"
              >
                <option value="Mintly">Mintly</option>
                <option value="CleanFleet Solutions">CleanFleet Solutions</option>
                <option value="Eco-Vest">Eco-Vest</option>
                <option value="InnovateTech">InnovateTech</option>
                <option value="SkillSwap">SkillSwap</option>
                <option value="SmartCare Home">SmartCare Home</option>
                <option value="CoinQuest">CoinQuest</option>
                <option value="Budgy">Budgy</option>
                <option value="Other">Other</option>
              </select>
              <div
                class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-slate-400"
              >
                <lucide-angular [img]="ChevronDown" class="h-4 w-4"></lucide-angular>
              </div>
            </div>
          </div>

          <div class="relative">
            <label for="message" class="block text-sm font-medium leading-6 text-white"
              >Message <span class="text-indigo-400">*</span></label
            >
            <div class="relative mt-2">
              <textarea
                id="message"
                formControlName="message"
                rows="4"
                class="block w-full resize-none rounded-xl border-0 bg-white/5 py-3.5 px-4 text-white shadow-sm ring-1 ring-inset transition-all selection:bg-indigo-500 selection:text-white focus:bg-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                [class.ring-red-500]="form.controls['message'].invalid && form.controls['message'].touched"
                [class.ring-white/10]="!form.controls['message'].touched || form.controls['message'].valid"
                placeholder="How can we help you?"
              ></textarea>
            </div>
            @if (form.controls['message'].invalid && form.controls['message'].touched) {
            <p class="absolute -bottom-5 left-0 text-xs font-medium text-red-400">
              Message is required
            </p>
            }
          </div>

          <div class="pt-2">
            <button
              type="submit"
              [disabled]="isSubmitting() || form.invalid"
              class="flex w-full justify-center rounded-xl bg-indigo-600 px-3.5 py-4 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500 hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 disabled:bg-slate-800 disabled:text-slate-500 disabled:ring-slate-700 disabled:cursor-not-allowed transition-all duration-200"
            >
              @if (isSubmitting()) {
              <lucide-angular [img]="Loader2" class="mr-2 h-5 w-5 animate-spin"></lucide-angular>
              Sending... } @else { Send message }
            </button>
          </div>
        </form>
        }
      </div>
    </div>
  </div>
</section>
