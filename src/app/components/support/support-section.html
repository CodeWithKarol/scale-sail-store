<section class="relative isolate min-h-screen bg-slate-950 py-16 sm:py-24 lg:py-32">
  <!-- Decorative background effects -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <div
      class="absolute left-[50%] top-0 -z-10 w-[60rem] -translate-x-1/2 -translate-y-[20%] transform-gpu overflow-hidden blur-3xl sm:top-[10%]"
      aria-hidden="true"
    >
      <div
        class="relative aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#3b82f6] to-[#8b5cf6] opacity-20 sm:w-[72.1875rem]"
        style="
          clip-path: polygon(
            74.1% 44.1%,
            100% 61.6%,
            97.5% 26.9%,
            85.5% 0.1%,
            80.7% 2%,
            72.5% 32.5%,
            60.2% 62.4%,
            52.4% 68.1%,
            47.5% 58.3%,
            45.2% 34.5%,
            27.5% 76.7%,
            0.1% 64.9%,
            17.9% 100%,
            27.6% 76.8%,
            76.1% 97.7%,
            74.1% 44.1%
          );
        "
      ></div>
    </div>
  </div>

  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div
      class="mx-auto flex max-w-5xl flex-col overflow-hidden rounded-3xl bg-slate-900 shadow-2xl ring-1 ring-white/10 lg:flex-row"
    >
      <!-- Info Panel (Left) -->
      <div class="relative flex-none lg:w-1/2">
        <div class="absolute inset-0">
          <img
            src="https://images.unsplash.com/photo-1556761175-5973dc0f32e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1632&q=80"
            alt=""
            class="h-full w-full object-cover object-center opacity-20 invert saturate-0 filter"
          />
          <div class="absolute inset-0 bg-slate-900/60 mix-blend-multiply"></div>
          <div
            class="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/40 to-transparent"
          ></div>
        </div>

        <div class="relative flex h-full flex-col justify-between p-10 sm:p-12">
          <div>
            <div class="flex items-center gap-x-3 text-indigo-400">
              <lucide-angular [img]="LifeBuoy" class="h-6 w-6"></lucide-angular>
              <span class="text-sm font-bold uppercase tracking-wider text-indigo-400/90"
                >Support</span
              >
            </div>
            <h2 class="mt-6 text-3xl font-bold tracking-tight text-white sm:text-4xl">
              Need help?
            </h2>
            <p class="mt-4 text-base leading-7 text-slate-300">
              If something doesnâ€™t work as expected, use the support form and include the template
              name plus a short description of the issue.
            </p>
          </div>

          <div class="mt-12 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2">
            <div
              class="rounded-2xl bg-white/5 p-6 ring-1 ring-white/10 backdrop-blur transition hover:bg-white/10"
            >
              <div class="flex items-center gap-x-2 text-sm font-semibold text-white">
                <lucide-angular [img]="Loader2" class="h-5 w-5 text-indigo-400"></lucide-angular>
                Response time
              </div>
              <div class="mt-2 text-sm leading-6 text-slate-400">Within 24 hours</div>
            </div>
            <div
              class="rounded-2xl bg-white/5 p-6 ring-1 ring-white/10 backdrop-blur transition hover:bg-white/10"
            >
              <div class="flex items-center gap-x-2 text-sm font-semibold text-white">
                <lucide-angular [img]="Check" class="h-5 w-5 text-emerald-400"></lucide-angular>
                Direct support
              </div>
              <div class="mt-2 text-sm leading-6 text-slate-400">Fixed by developer</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Panel (Right) -->
      <div class="flex-auto bg-slate-900/50 px-6 py-12 sm:px-12 lg:px-12 lg:py-16">
        @if (isSuccess()) {
          <div class="flex h-full flex-col items-center justify-center text-center">
            <div
              class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-emerald-500/10 ring-1 ring-emerald-500/20"
            >
              <lucide-angular [img]="Check" class="h-8 w-8 text-emerald-500"></lucide-angular>
            </div>
            <h3 class="mt-6 text-2xl font-bold tracking-tight text-white">Message sent!</h3>
            <p class="mt-2 text-base text-slate-400">
              We'll get back to you ensuring your issue is resolved.
            </p>
            <button
              (click)="isSuccess.set(false)"
              class="mt-8 rounded-md bg-white/10 px-6 py-2.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-white/10 hover:bg-white/20"
            >
              Send another message
            </button>
          </div>
        } @else {
          <form
            [formGroup]="form"
            (ngSubmit)="submitForm()"
            class="grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2"
          >
            @if (errorMessage()) {
              <div
                class="rounded-md bg-red-900/30 p-4 ring-1 ring-inset ring-red-500/50 sm:col-span-2"
              >
                <div class="flex gap-x-3">
                  <div class="flex-none text-red-400">!</div>
                  <div>
                    <h3 class="text-sm font-medium text-red-200">Error submitting form</h3>
                    <p class="mt-1 text-sm text-red-300/90">{{ errorMessage() }}</p>
                  </div>
                </div>
              </div>
            }

            <div class="relative sm:col-span-1">
              <label for="name" class="block text-sm font-medium leading-6 text-white"
                >Name <span class="text-indigo-400">*</span></label
              >
              <div class="relative mt-2.5">
                <input
                  type="text"
                  id="name"
                  [formControl]="form.controls.name"
                  class="block w-full rounded-md border-0 bg-white/5 py-2 px-3.5 text-white shadow-sm ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                  [class.ring-red-500]="form.controls.name.invalid && form.controls.name.touched"
                  [class.ring-white/10]="!form.controls.name.touched || form.controls.name.valid"
                  placeholder="John Doe"
                />
              </div>
              @if (form.controls.name.invalid && form.controls.name.touched) {
                <p class="absolute -bottom-5 left-0 text-xs font-medium text-red-400 leading-none">
                  Name is required
                </p>
              }
            </div>

            <div class="relative sm:col-span-1">
              <label for="email" class="block text-sm font-medium leading-6 text-white"
                >Email address <span class="text-indigo-400">*</span></label
              >
              <div class="relative mt-2.5">
                <input
                  type="email"
                  id="email"
                  [formControl]="form.controls.email"
                  class="block w-full rounded-md border-0 bg-white/5 py-2 px-3.5 text-white shadow-sm ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                  [class.ring-red-500]="form.controls.email.invalid && form.controls.email.touched"
                  [class.ring-white/10]="!form.controls.email.touched || form.controls.email.valid"
                  placeholder="you@example.com"
                />
              </div>
              @if (form.controls.email.invalid && form.controls.email.touched) {
                <p class="absolute -bottom-5 left-0 text-xs font-medium text-red-400 leading-none">
                  @if (form.controls.email.hasError('required')) {
                    Email is required
                  } @else {
                    Invalid email
                  }
                </p>
              }
            </div>

            <div class="sm:col-span-2">
              <label for="product" class="block text-sm font-medium leading-6 text-white"
                >Product</label
              >
              <div class="relative mt-2.5">
                <select
                  id="product"
                  [formControl]="form.controls.product"
                  class="block w-full appearance-none rounded-md border-0 bg-white/5 py-2 px-3.5 pr-10 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6 [&>option]:bg-slate-900"
                >
                  <option value="Mintly">Mintly</option>
                  <option value="CleanFleet Solutions">CleanFleet Solutions</option>
                  <option value="Eco-Vest">Eco-Vest</option>
                  <option value="InnovateTech">InnovateTech</option>
                  <option value="SkillSwap">SkillSwap</option>
                  <option value="SmartCare Home">SmartCare Home</option>
                  <option value="CoinQuest">CoinQuest</option>
                  <option value="Budgy">Budgy</option>
                  <option value="Other">Other</option>
                </select>

                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-slate-400"
                >
                  <lucide-angular [img]="ChevronDown" class="h-4 w-4"></lucide-angular>
                </div>
              </div>
            </div>

            <div class="relative sm:col-span-2">
              <label for="message" class="block text-sm font-medium leading-6 text-white"
                >Message <span class="text-indigo-400">*</span></label
              >
              <div class="relative mt-2.5">
                <textarea
                  id="message"
                  [formControl]="form.controls.message"
                  rows="4"
                  class="block w-full resize-none rounded-md border-0 bg-white/5 py-2 px-3.5 text-white shadow-sm ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"
                  [class.ring-red-500]="
                    form.controls.message.invalid && form.controls.message.touched
                  "
                  [class.ring-white/10]="
                    !form.controls.message.touched || form.controls.message.valid
                  "
                  placeholder="How can we help you?"
                ></textarea>
              </div>
              @if (form.controls.message.invalid && form.controls.message.touched) {
                <p class="absolute -bottom-5 left-0 text-xs font-medium text-red-400 leading-none">
                  Message is required
                </p>
              }
            </div>

            <div class="mt-4 sm:col-span-2">
              <button
                type="submit"
                [disabled]="isSubmitting() || form.invalid"
                class="flex w-full justify-center rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 disabled:bg-slate-800 disabled:text-slate-500 disabled:ring-slate-700 disabled:cursor-not-allowed transition-all duration-200"
              >
                @if (isSubmitting()) {
                  <lucide-angular
                    [img]="Loader2"
                    class="mr-2 h-5 w-5 animate-spin"
                  ></lucide-angular>
                  Sending...
                } @else {
                  Send message
                }
              </button>
            </div>
          </form>
        }
      </div>
    </div>
  </div>
</section>
