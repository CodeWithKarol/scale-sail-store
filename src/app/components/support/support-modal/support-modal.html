<div
  class="relative z-50 transition-opacity duration-300"
  aria-labelledby="modal-title"
  role="dialog"
  aria-modal="true"
>
  <div class="fixed inset-0 bg-slate-900/75 backdrop-blur-sm transition-opacity"></div>

  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <div
        class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl ring-1 ring-slate-900/5 transition-all w-full sm:my-8 sm:max-w-xl"
      >
        <div class="bg-white px-4 pb-4 pt-5 sm:p-8">
          @if (isSuccess()) {
          <div class="flex flex-col items-center justify-center py-10 text-center">
            <div
              class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100 mb-6"
            >
              <svg
                class="h-8 w-8 text-green-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
              </svg>
            </div>
            <h3 class="text-xl font-bold leading-6 text-slate-900">Message sent!</h3>
            <p class="mt-2 text-slate-500">
              We'll get back to you ensuring your issue is resolved.
            </p>
          </div>
          } @else {
          <div class="sm:flex sm:items-start">
            <div
              class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-indigo-100 sm:mx-0 sm:h-12 sm:w-12"
            >
              <svg
                class="h-6 w-6 text-indigo-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"
                />
              </svg>
            </div>
            <div class="mt-3 text-center sm:ml-5 sm:mt-0 sm:text-left w-full">
              <h3 class="text-xl font-bold leading-6 text-slate-900" id="modal-title">
                Contact Support
              </h3>
              <div class="mt-2">
                <p class="text-base text-slate-500">
                  Fill out the form below and we'll get back to you within 24 hours.
                </p>
              </div>

              <form [formGroup]="form" (ngSubmit)="submitForm()" class="mt-8 space-y-5">
                @if (errorMessage()) {
                <div class="rounded-md bg-red-50 p-4 mb-4">
                  <div class="flex">
                    <div class="ml-3">
                      <h3 class="text-sm font-medium text-red-800">Error</h3>
                      <div class="mt-2 text-sm text-red-700">
                        <p>{{ errorMessage() }}</p>
                      </div>
                    </div>
                  </div>
                </div>
                }

                <div>
                  <label for="name" class="block text-sm font-semibold leading-6 text-slate-900"
                    >Name</label
                  >
                  <div class="mt-1.5">
                    <input
                      type="text"
                      id="name"
                      formControlName="name"
                      class="block w-full rounded-md border-0 py-2 px-3.5 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-50"
                      placeholder="John Doe"
                    />
                  </div>
                </div>

                <div>
                  <label for="email" class="block text-sm font-semibold leading-6 text-slate-900"
                    >Email address</label
                  >
                  <div class="mt-1.5">
                    <input
                      type="email"
                      id="email"
                      formControlName="email"
                      class="block w-full rounded-md border-0 py-2 px-3.5 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-50"
                      placeholder="you@example.com"
                    />
                  </div>
                </div>

                <div>
                  <label for="product" class="block text-sm font-semibold leading-6 text-slate-900"
                    >Product</label
                  >
                  <div class="relative mt-1.5">
                    <select
                      id="product"
                      formControlName="product"
                      class="block w-full appearance-none rounded-md border-0 py-2 pl-3.5 pr-10 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-50"
                    >
                      <option>Mintly</option>
                      <option>CleanFleet</option>
                      <option>Eco-Vest</option>
                      <option>InnovateTech</option>
                      <option>SkillSwap Hub</option>
                      <option>SmartCare Home</option>
                      <option>CoinQuest</option>
                      <option>Budgy</option>
                      <option>Other</option>
                    </select>
                    <div
                      class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500"
                    >
                      <svg
                        class="h-5 w-5"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        aria-hidden="true"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                          clip-rule="evenodd"
                        />
                      </svg>
                    </div>
                  </div>
                </div>

                <div>
                  <label for="message" class="block text-sm font-semibold leading-6 text-slate-900"
                    >How can we help?</label
                  >
                  <div class="mt-1.5">
                    <textarea
                      id="message"
                      formControlName="message"
                      rows="4"
                      class="block w-full rounded-md border-0 py-2 px-3.5 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-50"
                      placeholder="Describe your issue..."
                    ></textarea>
                  </div>
                </div>

                <div class="mt-8 sm:flex sm:flex-row-reverse sm:gap-x-3">
                  <button
                    type="submit"
                    [disabled]="isSubmitting() || form.invalid"
                    class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-4 py-2.5 text-sm font-bold text-white shadow-sm hover:enabled:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-70 disabled:cursor-not-allowed sm:w-auto transition-all cursor-pointer"
                  >
                    @if (isSubmitting()) {
                    <svg
                      class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        class="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        stroke-width="4"
                      ></circle>
                      <path
                        class="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      ></path>
                    </svg>
                    Sending... } @else { Submit Request }
                  </button>
                  <button
                    type="button"
                    (click)="close.emit()"
                    class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-4 py-2.5 text-sm font-bold text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-600 sm:mt-0 sm:w-auto cursor-pointer"
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
